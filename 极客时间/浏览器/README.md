# 1. 浏览器的三个大的进化路线

## 1.1 应用程序 Web 化

随着云计算的普及和 HTML5 技术的快速发展，越来越多的应用转向了浏览器 / 服务器（B/S）架构，这种改变让浏览器的重要性与日俱增，视频、音频、游戏几大核心场景也都在往 Web 的使用场景切换。

## 1.2 Web 应用移动化

对于移动设备应用，Web 天生具有开放的基因，虽然在技术层面还有问题尚待解决（比如，渲染流程过于复杂且性能不及原生应用、离线时用户无法使用、无法接收消息推送、移动端没有一级入口），但 Google 推出了 PWA 方案来整合 Web
 和本地程序各自的优势。顺便说一句，PWA 也是我个人非常期待的方案。

## 1.3 Web 操作系统化
在我看来，Web 操作系统有两层含义：一是利用 Web 技术构建一个纯粹的操作系统，如 ChromeOS ；二是浏览器的底层结构往操作系统架构方向发展，在整个架构演化的大背景下会牵涉诸多改变，下面列举一些我认为相对重要的改变。

+ Chrome 朝着 SOA 的方向演化，未来很多模块都会以服务的形式提供给上层应用使用；
+ 在浏览器中引入多种编程语言的支持，比如新支持的 WebAssembly；
+ 简化渲染流程，使得渲染过程更加直接高效；
+ 加大对系统设备特性的支持；
+ 提供对复杂 Web 项目开发的支持。

# 2. 为什么需要学习浏览器工作原理？

## 2.1 准确评估 Web 开发项目的可行性

随着 Web 特性的极大丰富和浏览器性能的提升，越来越多的项目可以用 Web 来开发。所以，了解浏览器是如何工作的，能够让你更加准确地决策是否可以采用 Web 来开发项目。

## 2.2 从更高维度审视页面

要能站在用户体验角度来考虑页面性能。

+ 当用户请求一个网站时，如果在 1 秒内看不到关键内容，用户会产生任务被中断的感觉。
+ 当用户点击某些按钮时，如果 100ms 内无法响应，用户会感受到延迟。
+ 如果 Web 中的动画没有达到 60fps，用户会感受到动画的卡顿。

这里的页面加载时长、用户交互反馈时长、Web 动画中的帧数都决定了用户体验的流畅度，并最终决定了用户体验的效果。在用户体验尤其重要的今天，我们必须能够有效地解决这些体验问题，以免给产品造成不可挽回的伤害。

## 2.3 在快节奏的技术迭代中把握本质

从 2011 年到现在，前端技术出现了大爆炸式增长，各种新技术层出不穷。我认为Node.js 是前端发展的一个核心推动力。

为什么 Node.js 能如此快速地发展？根本原因还是浏览器功能以及整个前端的开发环境，不足以支撑日益增长的需求，所以“变化”是这段时期的主旋律。这种变化直接扩大了前端工程师的知识半径，这也导致很多前端开发工程师变成了爆栈工程师。

**等到核心技术足以支撑核心需求，那么前端生态会进入一个相对稳定的状态。**

## 2.4 前端技术针对核心诉求的演进

+ 首先是脚本执行速度问题。

不断修订和更新语言本身，这样你就应该知道 ES6、ES7、ES8，或者 TypeScript 出现的必要性。这种修订对目前生态环境的改动是最小的，所以推行起来会比较容易。

颠覆性地使用新的语言，这就是 WebAssembly 出现的原因。WebAssembly 需要经过编译器编译，所以体积小、执行速度快，使用它能大幅提升语言的执行效率，但是语言本身的完善，和生态的构建都是需要花很长时间来打造的。

+ 前端模块化开发

随着 Web 应用在各个领域的深入，Web 工程的复杂程度也越来越高，这就产生了模块化开发的需求，于是相应出现了 WebComponents 标准。我们所熟悉的 React 和 Vue 都在渐进地适应 WebComponents 标准，同时各种前端框架的最佳实践也会反过来影响 WebComponents 标准的制定。

+ 渲染效率问题

如果理解浏览器的渲染流程，那么你应该知道目前页面的渲染依然存在很大缺陷，然后你就清楚如何避开这些问题，从而开发出更加高效的 Web 应用。与此同时，Chrome 团队也在着手改善这些缺陷，比如正在开发的下一代布局方案 LayoutNG，还有渲染瘦身方案 Slim Paint，其目的都是让渲染变得更加简单和高效。

