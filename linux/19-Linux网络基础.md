# Linux网络基础
### ISO/OSI七层模型
##### ISO/OSI是什么
+ `ISO(International Organization for Standardization)`:国际标准化组织
+ `OSI(Open System Interconnection)`:开发系统互联模型
+ `IOS(Internetwork Operating System)`:互联网操作系统,是思科公司为其网络设备开发的操作维护系统.
+ `IOS(iPhone Operating System)`:苹果操作系统

### OSI的七层模型
+ `APDU`是应用协议数据单元
+ `PPDU`是表示层协议数据单元
+ `SPDU`是会话协议数据单元
+ `TPDU`是传输协议数据单元
+ `IP`地址负责外网通信
+ `MAC`地址负责局域网通信

##### OSI的七层框架介绍
+ 应用层:用户接口
+ 表示层:数据的表现形式,特定功能的实现,比如加密压缩
+ 会话层:对应用会话的管理,同步
+ **传输层:判断传输协议是否可靠,传输前的错误检测,流控(TCP略慢,但是保证不丢数据;UDP更快,但是有可能会丢数据)**
    + 邮件发送的端口是25,接收的端口是110
+ 网络层:提供逻辑地址,选择线路.
+ 数据链路层:成帧,用MAC地址访问媒介,错误检测与修正.
+ 物理层:(网线网卡等)设备之间的比特流的传输,物理接口,电气特性等.

### TCP/IP四层模型
##### TCP/IP四层模型
+ 应用层
+ 传输层
+ 网际互联层
+ 网络接口层

##### OSI模型与TCP/IP模型的对应
| OSI 7层模型 | TCP/IP 4层模型 |
|-------------|----------------|
|应用层       |应用层          |
|表示层       |应用层          |
|会话层       |应用层          |
|传输层       |传输层          |
|网络层       |网际互联层      |
|数据链路层   |网络接口层      |
|物理层       |网络接口层      |

##### 应用层
+ 应用层对应于OSI参考模型的高层,为用户提供所需要的各种服务.例如:FTP,Telnet,DNS,SMTP等

##### 传输层
+ 传输层对应于OSI参考模型的传输层,为应用层实体提供端到端的通信功能,保证了数据包的顺序传送机数据的完整性.该层定义了两个主要的协议:**传输控制协议(TCP)** 和 **用户数据报协议(UDP)**
+ TCP/IP协议的三次握手(两军问题)


##### 网际互联层
+ 网际互联层对应于OSI参考模型的网络层,主要解决主机到主机的通信问题.它所包含的协议设计数据包在整个网络上的逻辑传输.该层有三个主要协议:**网际协议(IP)**,**互联网组管理协议(IGMP)**,**互联网控制报文协议(ICMP)**
    + ICMP协议即平时`ping www.baidu.com`这个协议


##### 网络接口层
+ 网络接入层与OSI参考模型中的物理层和数据链路层相对应
+ 它负责监视数据在主机和网络之间的交换。
+ 事实上,TCP/IP本身并未定义该层的协议,而由参与互连的各网络使用自己的物理层和数据链路层协议,然后与TCP/IP的网络接入层进行连接
+ 地址解析协议(ARP)工作在此层,即OSI参考模型的数据链路层

##### TCP/IP模型与OSI模型的比较
**共同点**

+ OSI参考模型和TCP/IP参考模型都采用了层析结构的概念;
+ 都能够提供面向连接和无连接两种通信服务机制;

**不同点**

+ TCP/IP是四层模型,OSI模型是七层模型;
+ TCP/IP对可靠性要求更高;
+ OSI模型是在协议开发前设计的,具有通用性.TCP/IP是先有协议集然后建立模型,不适用于非TCP/IP网络;
+ 实际市场应用不同(OSI模型只是理论上的模型,并没有成熟的产而TCP/IP已经成为"实际上的国际标准");

### IP地址
##### IP地址分类


##### 子网掩码
+ 标准子网掩码:`255.0.0.0`,`255.255.0.0`,`255.255.255.0`
+ 不能和IP地址分开查看,必须和IP同时使用
+ Network id：网络id号，代表网络中的第一个IP
+ A类子网掩码
    + 与255匹配的IP地址代表不同网段
    + 与0.0.0匹配的IP地址代表不同主机
+ B类子网掩码
    + 与255.255对应的ip变化为不同网段
    + 与0.0对应的ip变化为不同主机
+ C类子网掩码
    + 与255.255.255对应的ip变化为不同网段
    + 与0对应的ip变化为不同主机

##### 变长子网掩码即子网规划
+ 网络地址=IP地址(二进制) 与 子网掩码地址（二进制）按位与
+ 广播地址计算方式：看子网掩码的0位有多少位，有多少位就将对应的IP地址全部换算成1
+ 主机地址 介于网络地址 与 广播地址 之间

### 端口作用
##### 端口号是什么？
+ 端口号16位，可用端口号数量为2的16次方
+ 端口号：在一个IP地址的主机提供服务的号码，系统服务在10000以内，私人编写的服务在10000以上，服务号码在60000以上

##### 端口号有多少种分类？
+ TCP/IP
+ UDP

##### 常见的端口号有哪些？
+ FTP(文本传输协议):端口号20(数据传输),21(登录),都是明文传输
+ SSH(安全shell协议):端口号22
+ telnet(远程登录协议):端口号23,默认是禁用的,因为是明文登录有风险
+ DNS(域名系统):端口号53(TCP/IP,UDP)
+ HTTP(超文本传输协议):端口号80
+ SMAP(简单邮件传输协议):端口号25(发邮件)
+ POP3(邮局协议3代):端口号110(收邮件)

##### 查看本机启用的端口
+ `netstat -an 命令`,查看本机的所有链接,端口,连接状态等等
+ `-a`,显示所有链接
+ `-n`,以IP和端口号形式显示,而不是以域名和服务名形式显示

### DNS作用
+ 不配置DNS是不能访问网络的

##### DNS名称解析概述
+ DNS(Domain Name System),域名系统,也称作名称解析
+ hosts文件:做静态IP和域名对应,优先级高于DNS解析
    + `C:\Windows\System32\drivers\etc`

##### 从hosts文件到DNS
+ 早期Hosts文件解析域名
    + 名称解析效能下降
    + 主机维护困难
+ DNS服务
    + 层次性
    + 分布式

##### DNS服务的作用
+ 将域名解析为IP地址
    + 客户机向DNS服务器发送域名查询请求
    + DNS服务器告知客户机Web服务器的IP地址
    + 客户机与Web服务器通信

##### 域名空间结构(完全合格域名)
**域名用.进行分割便于分级管理**
**三级域名+二级域名+顶级域名组成完整域名空间,域名全球唯一**

+ 根域 ".",根域名的服务器全球只有13台
+ 顶级域名(由域名分配组织ISO决定)
    + 组织域名
    + 国家或地区域名
+ 二级域名
+ 主机名(三级域名是申请完二级域名后自己规定的)

##### 域名空间结构特点
+ 互联网中的域名是由结构有规划的
+ 域名进行了分级,在进行域名和IP地址解析时才能更容易找到

##### 防范钓鱼网站
+ `http://www.imooc.com/learn/69`

##### DNS查询过程
+ DNS客户机---->本地域名服务器(递归查询)---->根DNS服务器--->一级域名---->二级域名---->三级域名(迭代查询)---->web服务器

##### DNS查询类型
+ 查询方式上区分
    + 递归查询：
        + 要么做出查询成功响应,要么做出查询失败的响应
        + 一般客户机和服务器之间属于递归查询
        + 即当客户机向DNS服务器发出查询请求,若DNS服务器本身不能解析,则会向另外的DNS服务器发出查询请求,得到结果后转交给客户机
    + 迭代查询
        + 服务器收到一次迭代查询回复一次结果,这个结果不一定是目标IP与域名的映射关,也可以是其他DNS服务器的地址
+ 查询内容上分
    + 正向查询时由域名查找IP地址
    + 反向查询时由IP地址查找域名

### 网关
##### 网关作用
+ 网关(Gateway)又称为网间连接器,协议转换器
+ 网关在网络层以上实现网络互连,是最复杂的网络互连设备,仅用于两个高层协议不同的网络互连
+ 网关既可以是用于广域网互连,可以用于局域网互连
+ 网关是一种充当转换重任的服务器或路由器

##### 网关

+ 交换机(数据链路层)不认识IP,只认识mac地址,局域网中交换数据.
+ 路由器:不同网络中进行数据交换
+ 网关:硬件设备,具有路由功能的机器,可以是路由器,也可以是服务器.
+ 作用:
    + 非本网段的数据包交由网关处理
    + 内网不能直接访问公网,网关把内网I与公网IP相互转换.

































