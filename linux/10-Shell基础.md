# Shell基础
[TOC]

### Shell概述
+ Shell是一个命令行解释器,它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序,用户可以用Shell来启动、挂起、停止甚至编写一些程序.
+ Shell也是一个功能相当强大的编程语言,易编写,易调试,灵活性较强.Shell是解释执行的脚本语言,在Shell中可以直接调用Linux系统命令.

### Shell分类
+ 两种主要语法类型有Bourne和C,彼此不兼容。
+ Bourne Shell:从1979年起Unix开始使用,主文件名是sh
+ C Shell:主要在BSD版的Unix系统中使用,语法与C类似
+ Bourne家族主要包括sh,ksh,Bash,psh,zsh
+ C家族主要包括csh,tcsh
+ 其中Bash成为现在Shell的标准

### 查看本系统的Shell
+ `echo $SHELL`

### 脚本执行方式
##### echo 输入命令
+ `echo [选项] [内容]` 
+ 如果输出的内容有空格，需要给内容加引号
+ `-e`特殊符号
+ `echo -e "\e[1;34m abc \e[0m"`输出带有颜色的文字

##### 书写脚本
+ vi hello.sh
```
#!/bin/bash
#The first program
echo -e "\e[1;34m abc \e[0m"
```

+ `chmod 755 hello.sh`
+ `./hello.sh`

### Bash的基本功能
##### 命令别名与快捷键
+ 查看系统中的别名`alias`
+ 别名例子`alias ll='ls -l --color=auto'
`
+ 创建别名`alias 别名='原命令'`
+ `alias vi='vim'`
+ 写入环境变量配置文件`vi ~/.bashrc`
+ 删除别名`unalias 别名`

##### 命令生效顺序
+ 第一顺位执行用绝对路径或相对路径执行
+ 第二顺位执行别名
+ 第三顺位执行Bash的内部命令
+ 第四顺位执行按照$PATH环境变量定义的目录查找顺序找到的第一个命令

##### 快捷键
+ `ctrl + c`强制关闭
+ `ctrl + l`,`clear`清屏
+ `ctrl + a`光标移动到命令行首
+ `ctrl + e`光标移动到命令行尾
+ `ctrl + u`从光标所在的位置删除到行首
+ `ctrl + z`把命令放到后台
+ `ctrl + r`在历史命令中搜索

##### 历史命令
+ `history [选项] [历史命令保存文件]`
+ -c 清空历史命令
+ -w 把缓存中的历史命令写入历史命令保存文件`~/.bash_history`
+ 历史命令默认保存的是1000条，可以在`/etc/profile`中修改
+ 使用上下方向调用以前的历史命令
+ 使用`!n`重复执行第n条历史命令
+ 使用`!!`重复执行上一条命令
+ 使用`!字串`重复执行最后条以该字串开头的命令 
+ 使用`tab`可以补全命令

##### 输出重定向
+ 标准输入输出
    + 正确输出`>`左右有空格
    + 错误输出`>>`左右没有空格

|设备       |设备文件名  |文件描述符 |类型        |
|-----------|------------|-----------|------------|
|键盘       |/dev/stdin  |0          |标准输入    |
|显示器     |/dev/sdtout |1          |标准输出    |
|显示器     |/dev/sdterr |2          |标准错误输出|

+ 输出重定向

|类型             |符号             |作用             |
|-----------------|-----------------|-----------------|
|标准输出重定向   |命令 > 文件        |以覆盖的方式,把命令的正确输入输出到指定的文件或设备中|
| 标准输出重定向  |命令 >> 文件       |以追加的方式,把命令的正确输入输出到指定的文件或设备中
|标准错误输出重定向|错误命令 2 文件|以覆盖的方式,把命令的错误输入输出到指定的文件或设备中|
|标准错误输出重定向|错误命令 2>>文件|以追加的方式,把命令的错误输入输出到指定的文件或设备中|

    
+ 输入重定向
    + `wc [选项] [文件名]`
    + -c 统计字节数
    + -w 统计单词数
    + -l 统计行数

##### 多命令顺序执行

|多命令执行符|格式         |作用                                                   |
|------------|-------------|-------------------------------------------------------|
|;           |命令1;命令2  |多命令顺序执行,命令之间没有任何逻辑关系               |
|&&          |命令1&&命令2 |逻辑与&&命令1正确执行,命令2才会执行                   |
|`|| `       |命令1`||`命令2 |逻辑或`||`当命令1执行不正确是,才会执行命令2             |

##### 管道符
+ 第一个运行的结果,是第二个命令的操作对象
+ `ls -l /etc | more`
+ `netstat` 查看网络连接
+ `netstat -an |grep ESTABlLISHED | wc -l`查看服务器连接情况

##### Shell通配符
+ ? 匹配一个任意字符
+ * 匹配0个或多个
+ [] 匹配中括号里边的内容,如果有多个内容,需要用多个中括号
+ [-] 匹配中括号里边的任意一个字符,-代表一个范围,例如[a-z]
+ [^] 匹配不是中括号里边的一个字符,例如[^0-9]匹配不是数字的字符
+ $ 调用变量的值，调用时需要在变量前加上$
+ '' 单引号只是一个简单的字符串
+ "" 双引号显示变量的值,类似于Linux中的$和\
+ ``和$()是一样的,引用系统的命令,为了避免与单引号弄混,建议只用$()
+ # Shell脚本中,#开头的行代表注释
